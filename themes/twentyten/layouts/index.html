{{ define "main" }}
{{ $paginator := .Paginate (where .Site.RegularPages "Section" "posts") }}

{{ range $paginator.Pages }}
<article class="post">
    <header class="entry-header">
        <h2 class="entry-title">
            <a href="{{ .Permalink }}">{{ .Title }}</a>
        </h2>
        
        <div class="entry-meta">
            <span class="meta-prep meta-prep-author">
                作者 {{ .Params.author | default "kingwing" }}
            </span>
            
            <span class="meta-sep"> | </span>
            
            <span class="meta-date">
                {{ .Date.Format "2006年1月2日" }}
            </span>
            
            {{ if .Params.categories }}
            <span class="meta-sep"> | </span>
            <span class="meta-cat">
                分类:
                {{ range first 1 .Params.categories }}
                <a href="/categories/{{ . | urlize }}/" rel="category">{{ . }}</a>
                {{ end }}
            </span>
            {{ end }}
            
            {{ if .Params.tags }}
            <span class="meta-sep"> | </span>
            <span class="meta-tag">
                标签:
                {{ range first 3 .Params.tags }}
                <a href="/tags/{{ . | urlize }}/" rel="tag">{{ . }}</a>
                {{ end }}
            </span>
            {{ end }}
        </div>
    </header>
    
    <div class="entry-content">
        {{ .Summary }}
        
        <footer class="entry-utility">
            <a href="{{ .Permalink }}" class="read-more">阅读全文 &raquo;</a>
        </footer>
    </div>
</article>
{{ end }}

{{ if or $paginator.HasNext $paginator.HasPrev }}
<nav class="navigation">
    {{ if $paginator.HasPrev }}
    <div class="nav-previous">
        <a href="{{ $paginator.Prev.URL }}">&laquo; 较新的文章</a>
    </div>
    {{ end }}
    
    {{ if $paginator.HasNext }}
    <div class="nav-next">
        <a href="{{ $paginator.Next.URL }}">较早的文章 &raquo;</a>
    </div>
    {{ end }}
</nav>
{{ end }}
{{ end }}
